<div class="row my-5">
  <div class="col">
      <h1 class="text-center mb-5">ê¸€ì“°ê¸°</h1>
      <form name="frm" method="post">
          <input class="form-control my-2" name="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.">
          <textarea class="form-control" name="body" rows="10" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
          <div class="text-center my-2">
              <button class="btn btn-primary">ê¸€ë“±ë¡</button>
              <button class="btn btn-secondary" type="reset">ë“±ë¡ì·¨ì†Œ</button>
          </div>
      </form>
  </div>
</div>
<!-- ì™¸ë¶€ì—ì„œ ì œê³µë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© appìƒì„± ë’¤ db ì—°ë™í•´ì•¼ í•¨. ì„œë¡œ ì—°ê´€ê´€ê³„ ìˆìŒ. -->
<!-- //ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°???  (https://cdnjs.com/libraries/moment.js) -->
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
<script type="module"> 
  import {app} from '/javascripts/firebase.js'
  import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js';
  const db = getFirestore(app)

  // ì´ë²¤íŠ¸ì²˜ë¦¬!! ë²„íŠ¼ì´ ëˆŒë ¸ì„ ë•Œ, dbì— ë³´ë‚´ì ¸ì•¼ í•¨!
  $(frm).on('submit',async(event)=>{
    event.preventDefault() //ë²„íŠ¼ ì„œë¸Œë°‹ìœ¼ë¡œ ì¸í•œ ìƒˆë¡œê³ ì¹¨ ë°©ì§€(ì‚¬ì´ë“œì´í™íŠ¸)
    let title = $(frm.title).val() //val() ì‚¬ìš©ì ì…ë ¥ ì œëª©
    let body = $(frm.body).val() //val() ì‚¬ìš©ì ì…ë ¥ 
    // ë¡œê·¸ì¸ ì„±ê³µ í›„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë‹´ê¸°ëŠ” emailê°€ì ¸ì™€ì„œ ì‘ì„±ìë¡œ í•œë‹¤. 
    
    // ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€ : ì œëª©, ë‚´ìš© ì…ë ¥ì•ˆëœ ìƒíƒœì•¼?
    if(title == ""||body ==""){
      $('#modal-alert .modal-body').html('ì œëª© ë˜ëŠ” ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”ğŸ¥²')
      $('#modal-alert').modal('show')
    }//ëª¨ë‘ ì‘ì„±ì´ ë˜ì—ˆë‹¤ë©´?
    else{
      let email = localStorage.getItem('email')
      //ë‚ ì§œ ì„¤ì •
      let date = moment(new Date()).format('YYYY-MM-DD HH:mm:ss')
      console.log(`${title}, ${body}, ${email}, ${date}`);
      // ìŒ ì´ë¦„ì´ ê°™ìœ¼ë©´ ìƒëµ ê°€ëŠ¥í•˜ì§€ë§Œ ìœ ì˜í•´ì•¼í•¨.(ES6 ë¶€í„° ê°€ëŠ¥) 
      // collectionì€ í´ë”, boardë¼ëŠ” í´ë”ë¥¼ í´ë¼ìš°ë“œì— ë§Œë“¤ê³ , ê¸€ì“°ê¸° ë“±ë¡ëœ ê²ƒì„ ë„£ìŒ. 
      // await addDoc(collection(db,'board'),{email,title,body,date})
      await addDoc(collection(db,'board'),{email:email,title:title,body:body,date:date})
      //firebase ì„œë²„ ì €ì¥ë˜ë©´ ì–´ë””ë¡œ ê°€ì•¼í•˜ì§€?? ëª©ë¡í˜ì´ì§€ë¡œ ê°€ì~!
      location.href='/board'
    }
  })
</script>
