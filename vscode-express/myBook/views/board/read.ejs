<div class="row my-5">
  <div class="col">
      <h1 class="text-center mb-5">글정보</h1>
      <div class="text-end mb-2" id="btn-group" style="display:none">
          <button class="btn btn-primary btn-sm" id="btn-update">수정</button>
          <button class="btn btn-danger btn-sm" id="btn-delete">삭제</button>
      </div>
      <div id="board"></div>
  </div>
</div>

<!-- 게시글정보 템플릿 -->
<script id="temp" type="text/x-handlebars-template">
  <div class="card">
      <div class="card-body">
          <h5>{{ title }}</h5>
          <div>{{ body }}</div>
      </div>
      <div class="card-footer">
          Posted on <span>{{ date }}</span> by <span>{{ email }}</span>
      </div>
  </div>
</script>

<script type="module" >
  // 한 건 : await getdoc 사용
  // 여러 건 : getdocs
  import {app} from '/javascripts/firebase.js'
  import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js';
  import { query, where, getDoc, orderBy, doc} from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js';
  const db = getFirestore(app)
  //파라미터로 넘긴 값 받아올 수 있나? 반드시 ""로 묶기, 아니면 변수로 처리됨 
  const id = "<%=id%>"
  console.log(id);
  const snapshot = await getDoc(doc(db,"board",id))
  const row = snapshot.data()
  console.log(row);
  //현재 페이지 핸들바스에 대한 링크가 없어도 SPA로 처리되고 있어서 참조할 수 있다. 즉, undefined가 발동x
  let temp = Handlebars.compile($('#temp').html())
    $('#board').html(temp(row))
</script>